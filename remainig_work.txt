2️⃣ Check Arduino connection
Connect your Arduino via USB.

In Arduino IDE, make sure:

Board type is correct (Arduino Uno, Nano, etc.)

COM port is the same as in your script (COM3).

Upload servo_sorter.ino to the Arduino.

3️⃣ Prepare data
Make sure your image dataset and labels.csv are in the right place (where the scripts expect them).
If you’re not sure, I can help set the correct paths inside the scripts.

4️⃣ Train models
Run in order:
python scripts/train_cv.py
python scripts/extract_cv_features.py
python scripts/train_hybrid.py

5️⃣ Test with real-time sorting

Run:
python scripts/infer_realtime.py --camera 0 --serial COM3
This should:
Capture grape image from your webcam
Predict good/bad
Send servo movement commands to Arduino

ABOUT dataset
Stage 1 — Create a small dataset
Since this is for grapes, you need two folders:
dataset/
   good/
      good1.jpg
      good2.jpg
      ...
   bad/
      bad1.jpg
      bad2.jpg
      ...
You can:

Take pictures of grapes with your webcam or phone (clear background is better)

Stage 2 — Create labels.csv
This file is what the hybrid model uses to connect external (image) features and internal (NIR spectroscopy) features.

Example:
filename,label,brix,polyphenols
good1.jpg,good,18.5,220
bad1.jpg,bad,13.2,150
good2.jpg,good,17.9,210
bad2.jpg,bad,12.4,140
Columns meaning:

filename → image file name (must match files in dataset)

label → good or bad (external quality)

brix, polyphenols → internal features from your NIR spectroscopy readings



